<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Geometry Dash</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: Arial, sans-serif; background: #222; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { display: none; background: #333; border-bottom: 5px solid #555; }
        
        #menu { text-align: center; background: #444; padding: 30px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .faces { display: flex; gap: 20px; justify-content: center; margin: 20px 0; }
        .face-option { width: 60px; height: 60px; border: 3px solid transparent; cursor: pointer; border-radius: 10px; display: flex; align-items: center; justify-content: center; background: #666; font-size: 30px; }
        .face-option.selected { border-color: #00ff00; background: #888; }
        
        .controls { margin-top: 20px; }
        button { padding: 10px 25px; font-size: 18px; cursor: pointer; background: #2ecc71; border: none; color: white; border-radius: 5px; font-weight: bold; }
        button:hover { background: #27ae60; }
        input[type="color"] { cursor: pointer; border: none; width: 50px; height: 50px; background: none; }
    </style>
</head>
<body>

    <div id="menu">
        <h1>Mini Geometry Dash</h1>
        <p>Vyber si svojho smajl칤ka:</p>
        <div class="faces">
            <div class="face-option selected" onclick="selectFace('happy', 0)">游땕</div>
            <div class="face-option" onclick="selectFace('neutral', 1)">游땛</div>
            <div class="face-option" onclick="selectFace('sad', 2)">驕좶잺</div>
        </div>
        
        <p>Vyber si farbu kocky:</p>
        <input type="color" id="playerColor" value="#00ff00">
        
        <div class="controls">
            <button onclick="startGame()">HRA콗</button>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const menu = document.getElementById('menu');
        
        // Nastavenia hry
        canvas.width = 800;
        canvas.height = 400;
        
        let gameState = 'menu';
        let score = 0;
        let selectedFace = 'happy';
        let playerColor = '#00ff00';
        
        const gravity = 0.8;
        const jumpPower = -12;
        const groundY = 350;

        let player = {
            x: 100,
            y: groundY - 40,
            size: 40,
            vy: 0,
            rotation: 0,
            targetRotation: 0,
            isJumping: false
        };

        let obstacles = [];
        let frameCount = 0;

        function selectFace(face, index) {
            selectedFace = face;
            const options = document.querySelectorAll('.face-option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
        }

        function startGame() {
            playerColor = document.getElementById('playerColor').value;
            menu.style.display = 'none';
            canvas.style.display = 'block';
            resetGame();
            gameState = 'playing';
            requestAnimationFrame(gameLoop);
        }

        function resetGame() {
            score = 0;
            obstacles = [];
            player.y = groundY - 40;
            player.vy = 0;
            player.rotation = 0;
            player.targetRotation = 0;
            player.isJumping = false;
        }

        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x + player.size / 2, player.y + player.size / 2);
            ctx.rotate((player.rotation * Math.PI) / 180);
            
            // Telo kocky
            ctx.fillStyle = playerColor;
            ctx.fillRect(-player.size / 2, -player.size / 2, player.size, player.size);
            ctx.strokeStyle = "white";
            ctx.lineWidth = 2;
            ctx.strokeRect(-player.size / 2, -player.size / 2, player.size, player.size);

            // Kreslenie smajl칤ka
            ctx.strokeStyle = "black";
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            if (selectedFace === 'happy') {
                // O캜i
                ctx.strokeRect(-10, -12, 2, 4);
                ctx.strokeRect(8, -12, 2, 4);
                // 칔smev
                ctx.arc(0, 5, 10, 0, Math.PI, false);
            } else if (selectedFace === 'neutral') {
                ctx.strokeRect(-10, -12, 2, 4);
                ctx.strokeRect(8, -12, 2, 4);
                // 캛iarka
                ctx.moveTo(-10, 10);
                ctx.lineTo(10, 10);
            } else {
                ctx.strokeRect(-10, -12, 2, 4);
                ctx.strokeRect(8, -12, 2, 4);
                // Smutn칳 칰smev
                ctx.arc(0, 15, 8, 0, Math.PI, true);
            }
            ctx.stroke();
            ctx.restore();
        }

        function spawnObstacle() {
            if (frameCount % 100 === 0) {
                obstacles.push({
                    x: canvas.width,
                    y: groundY,
                    size: 40
                });
            }
        }

        function drawObstacles() {
            ctx.fillStyle = "#ff4444";
            obstacles.forEach((obs, index) => {
                obs.x -= 6; // R칳chlos콘 pohybu
                
                ctx.beginPath();
                ctx.moveTo(obs.x, obs.y);
                ctx.lineTo(obs.x + obs.size, obs.y);
                ctx.lineTo(obs.x + obs.size / 2, obs.y - obs.size);
                ctx.closePath();
                ctx.fill();

                // Kol칤zia
                if (
                    player.x < obs.x + obs.size - 10 &&
                    player.x + player.size > obs.x + 10 &&
                    player.y + player.size > obs.y - obs.size + 10
                ) {
                    alert("Koniec hry! Tvoje sk칩re: " + score);
                    location.reload();
                }

                if (obs.x + obs.size < 0) {
                    obstacles.splice(index, 1);
                    score++;
                }
            });
        }

        function update() {
            // Gravit치cia a skok
            player.vy += gravity;
            player.y += player.vy;

            if (player.y > groundY - player.size) {
                player.y = groundY - player.size;
                player.vy = 0;
                player.isJumping = false;
                // Zarovnanie rot치cie po dopade
                player.rotation = player.targetRotation;
            }

            // Anim치cia rot치cie po캜as skoku
            if (player.isJumping) {
                player.rotation += 5; 
            }

            spawnObstacle();
            frameCount++;
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Zem
            ctx.fillStyle = "#555";
            ctx.fillRect(0, groundY, canvas.width, 50);

            update();
            drawPlayer();
            drawObstacles();

            ctx.fillStyle = "white";
            ctx.font = "20px Arial";
            ctx.fillText("Sk칩re: " + score, 20, 30);

            requestAnimationFrame(gameLoop);
        }

        // Ovl치danie
        window.addEventListener('keydown', (e) => {
            if ((e.code === 'Space' || e.code === 'ArrowUp') && !player.isJumping) {
                player.vy = jumpPower;
                player.isJumping = true;
                player.targetRotation += 90; // Pl치novan칠 oto캜enie
            }
        });

        // Ovl치danie dotykom/klikom pre mobil
        window.addEventListener('mousedown', () => {
            if (gameState === 'playing' && !player.isJumping) {
                player.vy = jumpPower;
                player.isJumping = true;
                player.targetRotation += 90;
            }
        });
    </script>
</body>
</html>
